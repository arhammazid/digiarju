:root {
    --primary: #6366f1;
    --primary-light: #e0e7ff;
    --secondary: #64748b;
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --ppt-color: #d04423;
    --bg-body: #f8fafc;
    --bg-card: #ffffff;
    --bg-hover: #f1f5f9;
    --text-main: #1e293b;
    --text-muted: #94a3b8;
    --border: #e2e8f0;
    --radius-sm: clamp(6px, 1.5vw, 12px);
    --radius-md: clamp(12px, 2vw, 20px);
    --radius-lg: clamp(16px, 3vw, 32px);
    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1);
    --sidebar-width: 260px;
    --base-font-size: clamp(14px, 1.5vw, 16px);
    --mobile-padding: clamp(12px, 4vw, 30px);
}

[data-theme="dark"] {
    --bg-body: #0f172a;
    --bg-card: #1e293b;
    --bg-hover: #334155;
    --text-main: #f8fafc;
    --text-muted: #94a3b8;
    --border: #334155;
    --primary-light: rgba(99, 102, 241, 0.2);
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
html { font-size: 16px; scroll-behavior: smooth; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
body { background-color: var(--bg-body); color: var(--text-main); transition: 0.3s; overflow-x: hidden; font-size: var(--base-font-size); line-height: 1.5; }

.app-container { display: flex; min-height: 100vh; }

.sidebar { 
    width: var(--sidebar-width); 
    background: var(--bg-card); 
    border-right: 1px solid var(--border); 
    display: flex; flex-direction: column; 
    position: fixed; height: 100vh; z-index: 50; 
    transition: transform 0.3s ease-in-out, width 0.3s ease-in-out;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

[data-theme="dark"] .sidebar { background: var(--bg-card); }
[data-theme="dark"] .sidebar .brand-text { color: var(--text-main); }
[data-theme="dark"] .sidebar .menu-group-label { color: var(--text-muted); }
[data-theme="dark"] .sidebar .menu-item { color: var(--text-main); }
[data-theme="dark"] .sidebar .menu-item i { color: var(--text-main); }
[data-theme="dark"] .menu-dropdown-toggle { color: var(--text-main); }
[data-theme="dark"] .menu-dropdown-toggle:hover { background: rgba(99, 102, 241, 0.1); color: var(--primary); }
[data-theme="dark"] .menu-dropdown-toggle.active { background: rgba(99, 102, 241, 0.2); color: var(--primary); }
[data-theme="dark"] .menu-dropdown-content { background: rgba(0, 0, 0, 0.3); }
[data-theme="dark"] .menu-dropdown-item { color: var(--text-main); }
[data-theme="dark"] .menu-dropdown-item:hover { background: rgba(99, 102, 241, 0.15); color: var(--primary); border-left-color: var(--primary); }
[data-theme="dark"] .menu-dropdown-item.active { color: var(--primary); border-left-color: var(--primary); }

.sidebar-header { padding: 24px; display: flex; align-items: center; gap: 12px; }

.logo-box {
    width: 40px; height: 40px; 
    border-radius: 12px; 
    display: flex; align-items: center; justify-content: center;
    overflow: hidden;
}

.logo-box img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.brand-text { font-weight: 800; font-size: 1.2rem; letter-spacing: -0.5px; white-space: nowrap; }
.sidebar-scroll { flex: 1; padding: 0 16px 20px 16px; overflow-y: auto; overflow-x: hidden; }

.menu-group-label {
    font-size: 0.75rem; font-weight: 700; 
    color: var(--text-muted); text-transform: uppercase; 
    letter-spacing: 0.8px; margin: 20px 0 8px 12px;
    white-space: nowrap;
}

.menu-item { 
    display: flex; align-items: center; gap: 12px; 
    padding: 12px 16px; border-radius: var(--radius-sm); 
    color: var(--secondary); cursor: pointer; 
    transition: 0.2s; font-weight: 500; margin-bottom: 4px;
    white-space: nowrap;
}

.menu-item:hover { background: var(--bg-body); color: var(--primary); }

.menu-item.active { 
    background: var(--primary-light); 
    color: var(--primary); font-weight: 600; 
}

.menu-item.active i { color: var(--primary); }

.menu-dropdown { margin-bottom: 4px; }

.menu-dropdown-toggle {
    display: flex; align-items: center; gap: 12px; justify-content: space-between;
    padding: 12px 16px; border-radius: var(--radius-sm); 
    color: var(--secondary); cursor: pointer; 
    transition: 0.2s; font-weight: 500;
    background: transparent;
    border: none;
    width: 100%;
    text-align: left;
}

.menu-dropdown-toggle:hover { background: var(--bg-body); color: var(--primary); }

.menu-dropdown-toggle.active { 
    background: var(--primary-light); 
    color: var(--primary); font-weight: 600; 
}

.menu-dropdown-toggle i:last-child {
    font-size: 0.7rem;
    transition: transform 0.2s;
}

.menu-dropdown-toggle.expanded i:last-child {
    transform: rotate(180deg);
}

.menu-dropdown-content {
    display: none;
    background: var(--bg-body);
    border-radius: var(--radius-sm);
    margin-left: 8px;
    overflow: hidden;
}

.menu-dropdown-content.show {
    display: block;
}

.menu-dropdown-item {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 16px 10px 32px; 
    color: var(--secondary); cursor: pointer;
    transition: 0.2s; font-weight: 400; font-size: 0.95rem;
    border-left: 3px solid transparent;
}

.menu-dropdown-item:hover { 
    background: var(--bg-card); color: var(--primary); 
    border-left-color: var(--primary);
}

.menu-dropdown-item.active {
    color: var(--primary); font-weight: 600;
    border-left-color: var(--primary);
}

.main-content { 
    flex: 1; margin-left: var(--sidebar-width); 
    padding: 30px; width: calc(100% - var(--sidebar-width)); 
    padding-bottom: 100px;
}

.topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }

.user-profile {
    display: flex; align-items: center; gap: 12px; 
    background: var(--bg-card); padding: 8px 16px; 
    border-radius: 50px; border: 1px solid var(--border);
    cursor: pointer; transition: 0.2s;
}

.user-profile:hover { border-color: var(--primary); }

.avatar { width: 32px; height: 32px; background: var(--primary-light); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary); font-weight: bold; }

.card { 
    background: var(--bg-card); border-radius: var(--radius-md); 
    border: 1px solid var(--border); box-shadow: var(--shadow-sm); 
    margin-bottom: 24px; overflow: hidden; transition: transform 0.2s;
}

[data-theme="dark"] .card { background: var(--bg-card); border-color: #334155; }

.card-header { 
    padding: 20px 24px; border-bottom: 1px solid var(--border); 
    display: flex; justify-content: space-between; align-items: center;
}

[data-theme="dark"] .card-header { border-color: #334155; }

.card-header h3 { font-size: 1.1rem; font-weight: 700; margin: 0; }

.card-body { padding: 24px; }

.welcome-banner {
    background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
    border-radius: var(--radius-lg);
    padding: 40px; color: white; margin-bottom: 30px;
    position: relative; overflow: hidden;
    box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);
    display: flex; align-items: center; gap: 20px;
}

.welcome-banner h1 { font-size: 1.8rem; font-weight: 800; margin-bottom: 10px; }

.banner-decoration { position: absolute; right: -50px; bottom: -50px; font-size: 10rem; opacity: 0.1; transform: rotate(-15deg); }

.quick-access-btn {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: 8px; padding: 20px 15px; border-radius: var(--radius-md);
    background: var(--bg-body); border: 1px solid var(--border); color: var(--text-main);
    font-weight: 600; cursor: pointer; transition: 0.3s; font-size: 0.85rem;
}

.quick-access-btn:hover {
    background: var(--primary); color: white; border-color: var(--primary);
    transform: translateY(-4px); box-shadow: 0 8px 16px rgba(79, 70, 229, 0.2);
}

.quick-access-btn i { font-size: 1.5rem; }

.feature-card {
    padding: 20px; border-radius: var(--radius-md); background: var(--bg-body);
    border: 1px solid var(--border); transition: 0.3s;
}

.feature-card:hover {
    border-color: var(--primary); box-shadow: 0 8px 16px rgba(79, 70, 229, 0.1);
}

.feature-icon {
    width: 45px; height: 45px; border-radius: 12px;
    display: flex; align-items: center; justify-content: center; font-size: 1.3rem;
}

.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }

.stat-card { 
    background: var(--bg-card); padding: 20px; border-radius: var(--radius-md); 
    border: 1px solid var(--border); display: flex; flex-direction: column; gap: 10px;
    transition: 0.3s;
}

.stat-card:hover {
    transform: translateY(-4px); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
}

.stat-card:hover small { opacity: 1; }

.stat-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }

.stat-value { font-size: 1.5rem; font-weight: 800; }

.stat-label { font-size: 0.85rem; color: var(--text-muted); }

.form-group { margin-bottom: clamp(16px, 3vw, 24px); }

.form-group label { display: block; margin-bottom: clamp(6px, 1.5vw, 10px); font-size: clamp(0.8rem, 1.3vw, 0.95rem); font-weight: 600; color: var(--secondary); }

[data-theme="dark"] .form-group label { color: var(--text-muted); }

.form-control { 
    width: 100%; padding: clamp(10px, 2vw, 14px) clamp(12px, 2vw, 18px); 
    border-radius: var(--radius-sm); 
    border: 1px solid var(--border); background: var(--bg-body); 
    color: var(--text-main); font-size: clamp(0.85rem, 1.5vw, 1rem); 
    transition: all 0.2s ease; min-height: 44px; touch-action: manipulation;
}

[data-theme="dark"] .form-control { 
    background: #334155; border-color: #475569; color: var(--text-main); 
}

[data-theme="dark"] .form-control::placeholder { color: var(--text-muted); }

.form-control:focus { outline: none; border-color: var(--primary); background: var(--bg-card); box-shadow: 0 0 0 3px var(--primary-light); }

[data-theme="dark"] .form-control:focus { background: #1e293b; }

textarea.form-control { resize: vertical; }

.btn { 
    display: inline-flex; align-items: center; justify-content: center; 
    gap: clamp(6px, 1.5vw, 10px); padding: clamp(10px, 2vw, 14px) clamp(16px, 4vw, 28px); 
    border-radius: var(--radius-sm); 
    font-weight: 600; cursor: pointer; border: none; transition: all 0.2s ease; 
    font-size: clamp(0.8rem, 1.5vw, 1rem);
    min-height: 44px; min-width: 44px; touch-action: manipulation;
    -webkit-user-select: none; user-select: none;
}

.btn-primary { background: var(--primary); color: white; }
.btn-primary:hover { background: #4f46e5; transform: translateY(-1px); }

.btn-info { background: #0ea5e9; color: white; }
.btn-info:hover { background: #0284c7; transform: translateY(-1px); }

.btn-secondary { background: #6b7280; color: white; }
.btn-secondary:hover { background: #4b5563; transform: translateY(-1px); }

.btn-secondary { background: white; border: 1px solid var(--border); color: var(--text-main); }
.btn-secondary:hover { background: var(--bg-body); }

[data-theme="dark"] .btn-secondary { background: #334155; border-color: #475569; color: var(--text-main); }
[data-theme="dark"] .btn-secondary:hover { background: #475569; }
[data-theme="dark"] .btn-info { background: #0ea5e9; }
[data-theme="dark"] .btn-info:hover { background: #0284c7; }

.btn-danger { background: #fee2e2; color: var(--danger); }
.btn-danger:hover { background: #fecaca; }

.btn-sm { padding: 8px 16px; font-size: 0.85rem; }

.btn-success { background: #10b981; color: white; }
.btn-success:hover { background: #059669; }

.btn-ppt { background: var(--ppt-color); color: white; }
.btn-ppt:hover { background: #b33619; }

.btn.loading { opacity: 0.7; cursor: not-allowed; }
.btn.loading i { animation: spin 1s linear infinite; }

@keyframes spin { 100% { transform: rotate(360deg); } }

.data-loader-spinner {
    display: none;
    align-items: center;
    gap: 10px;
    padding: 8px 16px;
    background: var(--primary-light);
    border-radius: 50px;
    border: 1px solid var(--primary);
    color: var(--primary);
    font-size: 0.85rem;
    font-weight: 600;
}

.data-loader-spinner.active {
    display: flex;
    animation: slideInRight 0.3s ease-out;
}

.data-loader-spinner i {
    animation: spin 1s linear infinite;
}

.data-loader-spinner span {
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.progress-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: transparent;
    z-index: 9999;
}

.progress-container.active {
    display: block;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), #a855f7, var(--primary));
    background-size: 200% 100%;
    animation: progressFlow 2s ease-in-out infinite;
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.8), 0 0 40px rgba(168, 85, 247, 0.6);
    border-radius: 2px;
    position: relative;
    overflow: hidden;
}

.progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: shimmer 2s infinite;
}

@keyframes progressFlow {
    0% { background-position: 0% center; }
    50% { background-position: 100% center; }
    100% { background-position: 0% center; }
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.progress-info {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: var(--bg-card);
    padding: 40px;
    border-radius: var(--radius-lg);
    border: 2px solid var(--primary);
    text-align: center;
    z-index: 10000;
    min-width: 300px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: popIn 0.3s ease-out;
}

.progress-info.active {
    display: block;
}

.progress-info h3 {
    margin: 0 0 20px 0;
    color: var(--primary);
    font-size: 1.3rem;
}

.progress-info .progress-percentage {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--primary);
    margin-bottom: 15px;
}

.progress-info .progress-text {
    font-size: 0.9rem;
    color: var(--text-muted);
    margin-bottom: 20px;
}

.progress-info .progress-bar-inline {
    width: 100%;
    height: 8px;
    background: var(--bg-body);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 15px;
}

.progress-info .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), #a855f7);
    border-radius: 4px;
    width: 0%;
    transition: width 0.3s ease;
}

.progress-backdrop {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 9999;
}

.progress-backdrop.active {
    display: block;
}

@keyframes popIn {
    from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
    to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

.btn-group-custom {
    display: flex; border-radius: var(--radius-sm); overflow: hidden;
    border: 1px solid var(--border); background: var(--bg-body);
    margin-bottom: 15px;
}

.btn-group-custom .btn-toggle {
    flex: 1; padding: 10px 15px; background: var(--bg-body);
    border: none; color: var(--secondary); font-weight: 600;
    cursor: pointer; transition: 0.2s;
}

.btn-group-custom .btn-toggle:hover { background: var(--primary-light); color: var(--primary); }

.btn-group-custom .btn-toggle.active {
    background: var(--primary); color: white;
}

.upload-box {
    border: 2px dashed var(--border); border-radius: var(--radius-md);
    padding: 30px 20px; text-align: center; background: var(--bg-body);
    transition: 0.2s; cursor: pointer; position: relative; margin-bottom: 20px;
}

.upload-box:hover, .upload-box.has-file { border-color: var(--primary); background: var(--primary-light); }

.upload-icon { font-size: 2rem; color: var(--text-muted); margin-bottom: 10px; }

.upload-text h4 { font-size: 1rem; margin: 0; color: var(--text-main); }

.file-badge { display: inline-block; background: var(--primary); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; margin-top: 10px; }

.divider-or { text-align: center; margin: 20px 0; position: relative; }

.divider-or::before { content: ""; position: absolute; top: 50%; left: 0; width: 100%; height: 1px; background: var(--border); z-index: 1; }

.divider-text { background: var(--bg-card); padding: 0 10px; position: relative; z-index: 2; color: var(--text-muted); font-size: 0.85rem; font-weight: 600; text-transform: uppercase; }

.config-section { 
    margin-top: 25px; 
    padding: 20px; 
    border-top: 1px dashed var(--border); 
    background: var(--bg-body);
    border-radius: 8px;
    transition: 0.2s;
}

.config-section:hover { background: var(--bg-body); }

.config-title { 
    font-size: 0.85rem; 
    font-weight: 700; 
    color: var(--text-muted); 
    margin-bottom: 15px; 
    text-transform: uppercase; 
    letter-spacing: 0.5px; 
    display: flex; 
    align-items: center; 
    gap: 8px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
}

.config-title i { color: var(--primary); font-size: 1rem; }

.config-section .btn-secondary.btn-sm {
    background: var(--bg-body);
    border: 1px solid var(--border);
    color: var(--text-main);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    width: 100%;
    justify-content: flex-start;
    margin-bottom: 10px;
    padding: 10px 14px;
}

.config-section .btn-secondary.btn-sm:hover {
    background: var(--primary-light);
    color: var(--primary);
    border-color: var(--primary);
}

.toggle-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); 
    gap: 12px;
    padding: 8px 0;
}

.toggle-card {
    display: flex; 
    align-items: center; 
    justify-content: space-between;
    padding: 12px 16px; 
    background: var(--bg-card);
    border: 1px solid var(--border); 
    border-radius: 10px;
    transition: 0.2s;
}

.toggle-card:hover { 
    border-color: var(--primary); 
    background: var(--bg-card);
    box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);
}

.toggle-label { 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    font-size: 0.85rem; 
    font-weight: 500; 
    color: var(--text-main); 
}

.toggle-label i { 
    color: var(--primary); 
    width: 16px; 
    text-align: center; 
    font-size: 0.9rem; 
}

.switch { position: relative; display: inline-block; width: 44px; height: 24px; flex-shrink: 0; }
.switch input { opacity: 0; width: 0; height: 0; }

.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #cbd5e1; transition: .3s; border-radius: 34px; }

.slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .3s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }

input:checked + .slider { background-color: var(--primary); }
input:checked + .slider:before { transform: translateX(20px); }

.content-section { display: none; animation: fadeScale 0.3s ease-out; }
.content-section.active { display: block; }

@keyframes fadeScale { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

.doc-preview { 
    background: white; color: black; padding: 40px; 
    border: 1px solid #ddd; box-shadow: 0 5px 15px rgba(0,0,0,0.05); 
    font-family: 'Times New Roman', serif; line-height: 1.6; 
    margin-top: 20px; display: none; border-radius: 4px;
}

.doc-preview h1, .doc-preview h2, .doc-preview h3 { margin-top: 1.5em; margin-bottom: 0.5em; }
.doc-preview p { margin-bottom: 1em; }
.doc-preview ul, .doc-preview ol { margin-bottom: 1em; padding-left: 20px; }
.doc-preview table { width: 100%; border-collapse: collapse; margin-bottom: 1em; }
.doc-preview th, .doc-preview td { border: 1px solid #ccc; padding: 8px; }
.doc-preview code { background: #f1f5f9; padding: 2px 4px; border-radius: 4px; font-family: monospace; }
.doc-preview img { max-width: 100%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); display: block; margin: 20px auto; }
.doc-header { text-align: center; border-bottom: 3px double black; padding-bottom: 10px; margin-bottom: 20px; }

[data-theme="dark"] .doc-preview { background: #e2e8f0; color: #000; }

.tab-nav { display: flex; gap: 5px; margin-bottom: 0; border-bottom: 1px solid #ddd; padding:0 10px; overflow-x: auto;}

.tab-btn { 
    padding: 10px 20px; background: #f1f5f9; border: 1px solid #ddd; 
    border-bottom: none; cursor: pointer; border-radius: 8px 8px 0 0; 
    font-weight: 600; color: #64748b; font-size: 0.9rem; white-space: nowrap;
}

.tab-btn:hover { background: #e2e8f0; }

.tab-btn.active { background: #fff; color: var(--primary); border-top: 3px solid var(--primary); margin-bottom: -1px; padding-bottom: 11px; border-bottom: 1px solid white; }

.tab-pane { display: none; padding: 40px; border: 1px solid #ddd; border-top: none; background: #fff; border-radius: 0 0 4px 4px; }

.tab-pane.active { display: block; animation: fadeIn 0.3s ease; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.btn-tab-sub {
    background: transparent; border: none; padding: 10px 20px;
    font-weight: 600; color: var(--secondary); cursor: pointer;
    border-bottom: 2px solid transparent; transition: 0.2s;
}

.btn-tab-sub:hover { color: var(--primary); }
.btn-tab-sub.active { color: var(--primary); border-bottom-color: var(--primary); }

.mobile-nav {
    display: none; position: fixed; bottom: 0; left: 0; width: 100%; 
    background: var(--bg-card); border-top: 1px solid var(--border); 
    padding: 6px 4px; justify-content: flex-start; z-index: 100;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.05);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
    scrollbar-color: var(--primary) transparent;
}

.mobile-nav::-webkit-scrollbar {
    height: 3px;
}

.mobile-nav::-webkit-scrollbar-track {
    background: transparent;
}

.mobile-nav::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 3px;
}

.nav-item { 
    display: flex; flex-direction: column; align-items: center; gap: 4px; 
    color: var(--text-muted); font-size: clamp(0.55rem, 1vw, 0.7rem); 
    padding: 6px 8px; border-radius: 8px; cursor: pointer;
    transition: all 0.2s ease; min-width: 56px; flex-shrink: 0;
    text-align: center; touch-action: manipulation; min-height: 48px;
    justify-content: center; border: 1px solid transparent;
}

.nav-item:hover { background: var(--bg-body); color: var(--text-main); border-color: var(--primary-light); }

.nav-item.active { color: var(--primary); background: var(--primary-light); font-weight: 600; border-color: var(--primary); }

.nav-item i { font-size: clamp(1rem, 3vw, 1.4rem); }

.nav-item span { font-size: clamp(0.5rem, 0.8vw, 0.65rem); font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.form-grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
.form-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }

.sidebar.collapsed { width: 80px; }

.sidebar.collapsed .brand-text, 
.sidebar.collapsed .menu-group-label { display: none; } 

.sidebar.collapsed .menu-item span { display: none; } 

.sidebar.collapsed .menu-item { justify-content: center; padding: 12px; }

.sidebar.collapsed .menu-item i { margin: 0; font-size: 1.4rem; }

.sidebar.collapsed .logo-box { margin: 0 auto; }

.main-content.collapsed { margin-left: 80px; width: calc(100% - 80px); }

@media (max-width: 768px) {
    :root { --sidebar-width: 80px; }
    .sidebar { width: 80px; transform: translateX(-100%); }
    .sidebar.open { transform: translateX(0); }
    .main-content { margin-left: 0; width: 100%; padding: clamp(12px, 4vw, 20px); padding-bottom: 100px; }
    .mobile-nav { display: flex; }
    .form-grid-3 { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    .form-grid-2 { grid-template-columns: 1fr; }
    .sidebar.collapsed { transform: translateX(-100%); width: 80px; } 
    .main-content.collapsed { margin-left: 0; width: 100%; }
    .tab-nav { flex-wrap: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .tab-btn { flex: 0 0 auto; font-size: 0.8rem; padding: 8px 15px; }
    .quick-access-btn { font-size: clamp(0.75rem, 2vw, 0.85rem); padding: clamp(12px, 2vw, 18px); }
    .stats-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
}

@media (max-width: 480px) {
    :root { --sidebar-width: 0px; --mobile-padding: clamp(8px, 3vw, 16px); }
    .sidebar { display: none; }
    .sidebar-header { padding: clamp(8px, 2vw, 12px); }
    .brand-text { display: none; }
    .menu-item span { display: none; }
    .menu-item { justify-content: center; padding: 12px; min-height: 40px; }
    .logo-box { margin: 0 auto; width: clamp(32px, 6vw, 40px); height: clamp(32px, 6vw, 40px); }
    .main-content { margin-left: 0; width: 100%; padding: clamp(8px, 3vw, 12px); padding-bottom: 120px; }
    .form-grid-3, .form-grid-2 { grid-template-columns: 1fr; }
    .mobile-nav { display: flex; }
    .topbar { flex-wrap: wrap; gap: 8px; }
    .welcome-banner { padding: clamp(16px, 4vw, 24px); flex-direction: column; }
    .welcome-banner h1 { font-size: clamp(1.2rem, 5vw, 1.5rem); }
    .modal-dialog { width: clamp(260px, 90vw, 400px); }
    .add-item-dialog { width: clamp(260px, 90vw, 400px); }
    .toast-container { right: clamp(8px, 3vw, 12px); top: clamp(8px, 3vw, 12px); }
}

@media (max-width: 768px) {
    :root { --sidebar-width: 0px; }
    .sidebar { display: none; }
    .main-content { margin-left: 0; width: 100%; padding: clamp(12px, 4vw, 20px); padding-bottom: 120px; }
    .mobile-nav { display: flex; }
    .form-grid-3 { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
    .form-grid-2 { grid-template-columns: 1fr; }
    .quick-access-btn { font-size: clamp(0.75rem, 2vw, 0.85rem); padding: clamp(12px, 2vw, 18px); }
    .stats-grid { grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); }
}

@media (768px < width < 1024px) {
    :root { --sidebar-width: 200px; }
    .sidebar { width: 200px; transform: none; }
    .main-content { margin-left: 200px; width: calc(100% - 200px); padding: clamp(16px, 3vw, 24px); }
    .form-grid-3 { grid-template-columns: repeat(2, 1fr); }
    .form-grid-2 { grid-template-columns: 1fr; }
}

@media (width >= 1440px) {
    :root { --sidebar-width: 280px; }
    .sidebar { width: 280px; }
    .main-content { margin-left: 280px; width: calc(100% - 280px); }
    .form-grid-3 { grid-template-columns: repeat(3, 1fr); }
    .stats-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
}

@media print {
    .sidebar, .mobile-nav, .topbar { display: none !important; }
    .main-content { margin-left: 0; width: 100%; padding: 0; }
    body * { visibility: hidden; }
    .print-area, .print-area * { visibility: visible; }
    .print-area { position: absolute; left: 0; top: 0; width: 100%; background: white; color: black; z-index: 99999; padding: 20px; }
    .output-actions, .tab-nav { display: none !important; }
}

@media (hover: none) and (pointer: coarse) {
    .btn, .menu-item, .user-profile, input, select, textarea { min-height: 48px; }
    a { padding: 8px; }
    .form-control { padding: clamp(12px, 3vw, 16px) clamp(14px, 3vw, 18px); }
}

@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .btn, .form-control, .menu-item { border-width: 0.5px; }
}

@media (orientation: landscape) and (max-height: 500px) {
    .sidebar { height: auto; max-height: 100vh; overflow-y: auto; }
    .main-content { padding-bottom: 60px; }
    .welcome-banner { padding: 12px; }
}

[data-theme="dark"] .modal-dialog { background: var(--bg-card); }

.select-group { position: relative; margin-bottom: 20px; }

.select-group select {
    appearance: none; padding: 12px 30px 12px 16px;
    border-radius: var(--radius-sm); border: 1px solid var(--border);
    background: var(--bg-body); color: var(--text-main);
    font-size: 0.95rem; width: 100%; cursor: pointer;
}

.select-group i { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--secondary); pointer-events: none; }

#rapor-ekstrakurikuler-list { display:flex; flex-direction:column; }

.ekstra-item { display:flex; gap:8px; align-items:flex-start; margin-bottom:8px; }

.ekstra-item .ekstra-name { flex: 2 1 220px; min-width:160px; }

.ekstra-item .ekstra-role { flex: 1 1 140px; min-width:110px; }

.ekstra-item .ekstra-freq { flex: 0 0 140px; width:140px; }

.ekstra-item button { flex: 0 0 40px; padding:8px; }

@media (max-width: 768px) {
    .ekstra-item { flex-direction:column; }
    .ekstra-item .ekstra-freq { width:100%; flex:1; }
    .ekstra-item button { align-self:flex-start; }
}

.toast-container { position: fixed; right: 20px; top: 20px; z-index: 10000; display:flex; flex-direction:column; gap:12px; max-width: 400px; }

.toast { 
    background: linear-gradient(135deg, var(--bg-card), #1e293b); 
    color: #f0f0f0; 
    padding: 14px 18px; 
    border-radius: 10px; 
    font-size:0.9rem; 
    box-shadow: 0 8px 24px rgba(0,0,0,0.3); 
    animation: slideInRight 0.3s ease-out;
    border-left: 4px solid var(--primary);
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 500;
}

.toast.success { border-left-color: var(--success); color: #e8f5e9; }
.toast.danger { border-left-color: var(--danger); color: #ffebee; }
.toast.warning { border-left-color: var(--warning); color: #fff8e1; }
.toast.info { border-left-color: var(--primary); color: #e3f2fd; }

.toast i { font-size: 1.1rem; }

[data-theme="dark"] .toast { 
    background: linear-gradient(135deg, var(--bg-card), #334155); 
    color: #e0e0e0;
    box-shadow: 0 8px 24px rgba(0,0,0,0.6);
}

[data-theme="dark"] .toast.success { color: #c8e6c9; }
[data-theme="dark"] .toast.danger { color: #ffcccc; }
[data-theme="dark"] .toast.warning { color: #fff9c4; }
[data-theme="dark"] .toast.info { color: #bbdefb; }

[data-theme="light"] .toast { 
    background: linear-gradient(135deg, #f5f5f5, #eeeeee); 
    color: #212121;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

[data-theme="light"] .toast.success { color: #1b5e20; }
[data-theme="light"] .toast.danger { color: #b71c1c; }
[data-theme="light"] .toast.warning { color: #f57f17; }
[data-theme="light"] .toast.info { color: #0d47a1; }

@keyframes slideInRight { from { transform: translateX(400px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

#modal-output { display: none; position: fixed; inset: 0; background: rgba(15,23,42,0.55); z-index: 9999; align-items: center; justify-content: center; padding: 24px; }

#modal-output.open { display:flex; }

.modal-dialog { background: var(--bg-card); color: var(--text-main); width: 100%; max-width: 920px; border-radius: 14px; box-shadow: 0 12px 40px rgba(2,6,23,0.4); overflow: hidden; display: flex; flex-direction: column; max-height: 90vh; }

.modal-header { display:flex; align-items:center; justify-content:space-between; padding: 16px; border-bottom: 1px solid var(--border); }

.modal-body { padding: 18px; overflow-y:auto; font-family: 'Plus Jakarta Sans', sans-serif; flex: 1; }

.modal-footer { display:flex; gap:8px; justify-content:flex-end; padding: 14px 18px; border-top:1px solid var(--border); background: var(--bg-card); }

.generated-image { max-width: 100%; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }

.add-item-modal { display: none; position: fixed; inset: 0; background: rgba(15,23,42,0.6); z-index: 10001; align-items: center; justify-content: center; padding: 24px; }

.add-item-modal.show { display: flex; }

.add-item-dialog { background: var(--bg-card); color: var(--text-main); width: 100%; max-width: 500px; border-radius: 14px; box-shadow: 0 20px 50px rgba(2,6,23,0.5); overflow: hidden; display: flex; flex-direction: column; }

.add-item-header { display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid var(--border); background: linear-gradient(135deg, var(--primary-light), rgba(99, 102, 241, 0.1)); }

.add-item-header h3 { margin: 0; font-size: 1.1rem; font-weight: 700; }

.add-item-close { background: none; border: none; font-size: 1.5rem; color: var(--text-muted); cursor: pointer; transition: 0.2s; }

.add-item-close:hover { color: var(--text-main); }

.add-item-body { padding: 20px; display: flex; flex-direction: column; gap: 15px; }

.add-item-form-group { display: flex; flex-direction: column; gap: 8px; }

.add-item-form-group label { font-weight: 600; color: var(--secondary); font-size: 0.9rem; }

[data-theme="dark"] .add-item-form-group label { color: var(--text-muted); }

.add-item-form-group input, .add-item-form-group select { padding: 12px 14px; border: 1px solid var(--border); border-radius: var(--radius-sm); background: var(--bg-body); color: var(--text-main); font-size: 0.95rem; }

[data-theme="dark"] .add-item-form-group input, 
[data-theme="dark"] .add-item-form-group select { 
    background: #334155; border-color: #475569; color: var(--text-main); 
}

.add-item-form-group input:focus, .add-item-form-group select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--primary-light); }

.add-item-suggestions { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; max-height: 200px; overflow-y: auto; }

.add-item-suggestion-btn { padding: 10px; background: var(--bg-body); border: 1px solid var(--border); border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 500; transition: 0.2s; text-align: left; }

[data-theme="dark"] .add-item-suggestion-btn { background: #334155; border-color: #475569; color: var(--text-main); }

.add-item-suggestion-btn:hover { background: var(--primary-light); border-color: var(--primary); color: var(--primary); }

.add-item-footer { display: flex; gap: 10px; justify-content: flex-end; padding: 16px 20px; border-top: 1px solid var(--border); background: var(--bg-body); }

[data-theme="dark"] .add-item-footer { background: #1e293b; border-color: #334155; }

.add-item-footer .btn { margin: 0; }

[data-theme="dark"] div[style*="background: white"] { background: var(--bg-card) !important; color: var(--text-main) !important; }

[data-theme="dark"] div[style*="background: #fef3c7"] { background: rgba(99, 102, 241, 0.15) !important; color: var(--text-main) !important; border-color: var(--primary) !important; }

[data-theme="dark"] div[style*="color: #92400e"] { color: var(--text-main) !important; }

[data-theme="dark"] div[style*="background: #f0fdf4"] { background: rgba(16, 185, 129, 0.15) !important; border-color: var(--success) !important; }

[data-theme="dark"] div[style*="background: #e0f2fe"] { background: rgba(99, 102, 241, 0.15) !important; border-color: var(--primary) !important; }

[data-theme="dark"] ul[style*="color: #92400e"] { color: var(--text-main) !important; }

[data-theme="dark"] small[style*="color: #92400e"] { color: var(--text-main) !important; }

[data-theme="dark"] small { color: var(--text-muted) !important; }

[data-theme="dark"] p[style*="color: var(--text-muted)"] { color: var(--text-muted) !important; }
